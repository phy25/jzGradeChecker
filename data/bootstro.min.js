/* Source: https://github.com/clu3/bootstro.js/blob/master/bootstro.js | Some texts are localized */
$(document).ready(function(){!function(a,b){function k(a){var c=b(window).scrollTop(),d=c+b(window).height(),e=a.offset().top,f=e+a.height();return f>=c&&d>=e&&d>=f&&e>=c}function l(a,b){var d,f,g,i,c=get_element(b);return i=2==h?"btn btn-primary btn-mini":"btn btn-primary btn-xs",a+="<div class='bootstro-nav-wrapper'>",d=c.attr("data-bootstro-nextButton")?c.attr("data-bootstro-nextButton"):c.attr("data-bootstro-nextButtonText")?'<button class="'+i+' bootstro-next-btn">'+c.attr("data-bootstro-nextButtonText")+"</button>":"undefined"!=typeof j.nextButton?j.nextButton:'<button class="'+i+' bootstro-next-btn">'+j.nextButtonText+"</button>",f=c.attr("data-bootstro-prevButton")?c.attr("data-bootstro-prevButton"):c.attr("data-bootstro-prevButtonText")?'<button class="'+i+' bootstro-prev-btn">'+c.attr("data-bootstro-prevButtonText")+"</button>":"undefined"!=typeof j.prevButton?j.prevButton:'<button class="'+i+' bootstro-prev-btn">'+j.prevButtonText+"</button>",g=c.attr("data-bootstro-finishButton")?c.attr("data-bootstro-finishButton"):c.attr("data-bootstro-finishButtonText")?'<button class="'+i+' bootstro-finish-btn">'+c.attr("data-bootstro-finishButtonText")+"</button>":"undefined"!=typeof j.finishButton?j.finishButton:'<button class="'+i+' bootstro-finish-btn">'+j.finishButtonText+"</button>",1!=e&&(0==b?a+=d:b==e-1?a+=f:a=a+d+f),a+="</div>",a=a+'<div class="bootstro-finish-btn-wrapper">'+g+"</div>"}var d,e,j,g=null,h=3,i={nextButtonText:"继续 &rsaquo;",prevButtonText:"&lsaquo; 返回",finishButtonText:'<i class="icon-ok"></i> Ok I got it, get back to the site',stopOnBackdropClick:!0,stopOnEsc:!0,margin:100};process_items=function(a){var c=[];return b.each(a,function(a,d){b.each(d,function(a,c){b(d.selector).attr("data-bootstro-"+a,c)}),b(d.selector).is(":visible")&&c.push(d.selector)}),c.join(",")},get_element=function(a){return d.filter("[data-bootstro-step="+a+"]").size()>0?d.filter("[data-bootstro-step="+a+"]"):d.eq(a)},get_popup=function(a){var b={},c=get_element(a),d="";e>1&&(d="<span class='label label-info'>"+(a+1)+"/"+e+"</span>"),b.title=c.attr("data-bootstro-title")||"",""!=b.title&&""!=d?b.title=d+" "+b.title:""==b.title&&(b.title=d),b.content=c.attr("data-bootstro-content")||"",b.content=l(b.content,a),b.placement=c.attr("data-bootstro-placement")||"top";var f="";return c.attr("data-bootstro-width")&&(b.width=c.attr("data-bootstro-width"),f=f+"width:"+c.attr("data-bootstro-width")+";"),c.attr("data-bootstro-height")&&(b.height=c.attr("data-bootstro-height"),f=f+"height:"+c.attr("data-bootstro-height")+";"),b.trigger="manual",b.html=c.attr("data-bootstro-html")||"top",c.attr("data-bootstro-container")&&(b.container=c.attr("data-bootstro-container")),b.template='<div class="popover" style="'+f+'"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div>'+"</div>",b},a.destroy_popover=function(a){var a=a||0;if("all"!=a){var b=get_element(a);b.popover("destroy").removeClass("bootstro-highlight")}},a.stop=function(){a.destroy_popover(g),a.unbind(),b("div.bootstro-backdrop").remove(),"function"==typeof j.onExit&&j.onExit.call(this,{idx:g})},a.go_to=function(c){if(a.destroy_popover(g),0!=e){var d=get_popup(c),f=get_element(c);f.popover(d).popover("show");var h=b(window).scrollTop(),i=Math.min(b(".popover.in").offset().top,f.offset().top),l=i-h;l<j.margin?b("html,body").animate({scrollTop:i-j.margin},"slow"):k(b(".popover.in"))&&k(f)||b("html,body").animate({scrollTop:i-j.margin},"slow"),f.addClass("bootstro-highlight"),g=c}},a.next=function(){g+1==e?"function"==typeof j.onComplete&&j.onComplete.call(this,{idx:g}):(a.go_to(g+1),"function"==typeof j.onStep&&j.onStep.call(this,{idx:g,direction:"next"}))},a.prev=function(){0==g||(a.go_to(g-1),"function"==typeof j.onStep&&j.onStep.call(this,{idx:g,direction:"prev"}))},a._start=function(c){c=c||".bootstro",d=b(c),e=d.size(),e>0&&0===b("div.bootstro-backdrop").length&&(b('<div class="bootstro-backdrop"></div>').appendTo("body"),a.bind(),a.go_to(0))},a.start=function(c,d){j=b.extend(!0,{},i),b.extend(j,d||{}),"undefined"!=typeof j.url?b.ajax({url:j.url,success:function(b){if(b.success){var d=b.result;c=process_items(d),a._start(c)}}}):"undefined"!=typeof j.items?a._start(process_items(j.items)):a._start(c)},a.set_bootstrap_version=function(a){h=a},a.bind=function(){a.unbind(),b("html").on("click.bootstro",".bootstro-next-btn",function(b){return a.next(),b.preventDefault(),!1}),b("html").on("click.bootstro",".bootstro-prev-btn",function(b){return a.prev(),b.preventDefault(),!1}),b("html").on("click.bootstro",".bootstro-finish-btn",function(b){b.preventDefault(),a.stop()}),j.stopOnBackdropClick&&b("html").on("click.bootstro","div.bootstro-backdrop",function(c){b(c.target).hasClass("bootstro-backdrop")&&a.stop()}),b(document).on("keydown.bootstro",function(b){var c=b.keyCode?b.keyCode:b.which;39==c?a.next():37==c?a.prev():27==c&&j.stopOnEsc&&a.stop()})},a.unbind=function(){b("html").unbind("click.bootstro"),b(document).unbind("keydown.bootstro")}}(window.bootstro=window.bootstro||{},jQuery)});